/* === COLORS === */
:root {
	--turn-duration: 1000ms;
    --bg-dark: #0a0e1a;
    --bg-med: #1a1e2e;
    --bg-console: #0f172a;
    --bg-header: #1e293b;
    
    --border-main: #334155;
    --border-light: #475569;
	--border-dark: #1e293b;
    
    --text-main: #e2e8f0;
    --text-dim: #94a3b8;
    --text-darker: #64748b;
    
    --color1: #f7ea79;
    --color2: #91bff7;
    --color3: #fbbf24;
    --color4: #f87171;
	--rarity-common: #334155;
	--rarity-uncommon: #3dc26e;
	--rarity-rare: #3b82f6;
	--rarity-epic: #a855f7;
	--rarity-legendary: #f59e0b;
    
    --scrollbar-track: #0f172a;
    --scrollbar-thumb: #334155;

	/* === GENERIC ICONS === */
	--arrow-icon: url(assets/arrow.png);
	--trend-icon: url(assets/trend.png);

	/* === BUILDING ICONS === */
	--reactor-icon: url(assets/buildings/reactor.png);
	--fabricator-icon: url(assets/buildings/fabricator.png);
	--trade-hub-icon: url(assets/buildings/trade-hub.png);

	/* === TRADEHUB MODULE ICONS === */
	--connectivity-icon: url(assets/buildings/tradehub_modules/connectivity.png);
	--trader-icon: url(assets/buildings/tradehub_modules/trader.png);
	--thief-icon: url(assets/buildings/tradehub_modules/thief.png);
	--beacon-icon: url(assets/buildings/tradehub_modules/beacon.png);
	--planification-icon: url(assets/buildings/tradehub_modules/planification.png);
	--protection-icon: url(assets/buildings/tradehub_modules/protection.png);
	--hacker-icon: url(assets/buildings/tradehub_modules/hacker.png);
	--optimizer-icon: url(assets/buildings/tradehub_modules/optimizer.png);

	/* === REACTOR MODULE ICONS === */
	--efficiency-icon: url(assets/buildings/reactor_modules/efficiency.png);
	--overload-icon: url(assets/buildings/reactor_modules/overload.png);
	--synergy-icon: url(assets/buildings/reactor_modules/synergy.png);
	--stability-icon: url(assets/buildings/reactor_modules/stability.png);
	--catalyst-icon: url(assets/buildings/reactor_modules/catalyst.png);
	--burst-icon: url(assets/buildings/reactor_modules/burst.png);
	--quantum-icon: url(assets/buildings/reactor_modules/quantum.png);

	/* === FABRICATOR MODULE ICONS === */
	--basic-production-line-icon: url(assets/buildings/fabricator_modules/basic_production_line.png);
	--advanced-production-line-icon: url(assets/buildings/fabricator_modules/advanced_production_line.png);
	--composite-production-line-icon: url(assets/buildings/fabricator_modules/composite_production_line.png);
	--ultimate-production-line-icon: url(assets/buildings/fabricator_modules/ultimate_production_line.png);

	/* === UPGRADE ICONS === */
	--producer-icon: url(assets/upgrades/producer.png);
	--multi-producer-icon: url(assets/upgrades/multi_producer.png);
	--energy-drop-icon: url(assets/upgrades/energy.png);
	--cleaner-icon: url(assets/upgrades/cleaner.png);
	--maxEnergy-icon: url(assets/upgrades/battery.png);
	--autoCleaner-icon: url(assets/upgrades/auto_cleaner.png);

	/** === RESOURCE COLORS === */
	--energy-color: #91bff7;
	--chip-color: #ff6b35;
	--data-color: #2196f3;
	--model-color: #9c27b0;
	--engineer-color: #4caf50;
	/* === RESOURCE ICONS (TIER 1 - RAW) === */
	--energy-icon: url(assets/resources/energy.png);
	--chip-icon: url(assets/resources/chip.png);
	--data-icon: url(assets/resources/data.png);
	--model-icon: url(assets/resources/model.png);
	--engineer-icon: url(assets/resources/engineer.png);
	/** === RESOURCE ICONS (TIER 2 - BASIC) === */
	--algorithm-icon: url(assets/resources/algorithm.png);
	--dataset-icon: url(assets/resources/dataset.png);
	--prototype-icon: url(assets/resources/prototype.png);
	--catalyzer-icon: url(assets/resources/catalyzer.png);
	/* === RESOURCE ICONS (TIER 3 - ADVANCED) === */
	--aiModule-icon: url(assets/resources/ai_module.png);
	--robot-icon: url(assets/resources/robot.png);
	--expert-icon: url(assets/resources/expert.png);
	/* === RESOURCE ICONS (TIER 4 - COMPLEX) === */
	--aiCore-icon: url(assets/resources/ai_core.png);
	--drone-icon: url(assets/resources/drone.png);
	--superconductor-icon: url(assets/resources/superconductor.png);
	/* === RESOURCE ICONS (TIER 5 - ULTIMATE) === */
	--genius-icon: url(assets/resources/genius.png);
	--agiCell-icon: url(assets/resources/agi_cell.png);
	/* === SPECIAL RESOURCE ICONS === */
	--outputcoef-icon: url(assets/output_coef.png);

	--skull-icon: url(assets/skull.png);
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
::-webkit-scrollbar {
    width: 6px;
}
::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
}
::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 3px;
}
body {
    font-family: 'Courier New', monospace;
    background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-med) 100%);
    color: var(--text-main);
    overflow: hidden;
    width: 100dvw;
    height: 100dvh;
}
.UI-wrapper {
	pointer-events: none;
	position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1;
}
canvas {
	opacity: 0;
	animation: fadeIn 8s 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}
button {
	user-select: none;
	cursor: pointer;
	background: var(--bg-header);
	color: var(--text-dim);
	border: 1px solid var(--border-light);
	padding: 5px 10px;
	border-radius: 4px;
	font-size: 12px;
	transition: background .2s ease-in-out,
		color .12s ease-in-out,
		border-color .2s ease-in-out,
		filter .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
button:disabled {
	cursor: not-allowed;
	filter: grayscale(1) brightness(0.6);
}
button:not(:disabled):hover {
	background: var(--bg-console);
	color: var(--text-main);
	border-color: var(--color2);
	transition: background .12s ease-in-out,
		color .06s ease-in-out,
		border-color .12s cubic-bezier(0.175, 0.885, 0.32, 1.275),
		filter .12s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
[contenteditable="true"] {
	padding: 6px 2px 6px 2px;
}
[contenteditable="true"]:focus {
  outline: none;
  border-bottom: 2px solid var(--color2);
}

/* == ANIMATIONS == */
@keyframes fadeIn {
    to { opacity: 1; }
}
@keyframes fadeOut {
	to { opacity: 0; }
}
@keyframes blinkBright {
	0%, 100% { filter: brightness(.8); }
	50% { filter: brightness(1.2); }
}

/* === GLOBAL ELEMENTS === */
.tooltip {
	user-select: none;
	white-space: nowrap;
	display: none;
	pointer-events: none;
	position: absolute;
	background: rgba(0, 0, 0, 0.9);
	text-align: center;
	border: 1px solid var(--border-light);
	color: var(--text-dim);
	font-weight: initial;
	padding: 10px;
	border-radius: 4px;
	z-index: 1001;
	font-size: 12px;
	top: 120%;
	left: 50%;
	transform: translateX(-50%);
}
.resource:hover .tooltip, .upgrade-offer:hover .tooltip,
.hoverable-tooltip:hover .tooltip {
	display: block;
}
.helper-text {
	pointer-events: none;
	display: none;
	font-size: 14px;
	font-weight: bold;
	color: var(--text-dim);
	animation: blinkBright 1s infinite;
}
.helper-text.visible {
	display: block;
}
.top-left-corner-decoration {
	position: absolute;
	width: 16px;
	height: 16px;
	border: 3px solid var(--text-dim);
	border-bottom: none;
	border-right: none;
}
.close-btn {
	position: absolute;
	cursor: pointer;
	top: 0px;
	right: 2px;
	padding: 4px 8px;
	color: var(--text-dim);
	font-size: 14px;
	font-weight: bold;
	user-select: none;
}
.close-btn:hover {
	color: var(--text-main);
}
.expand-btn {
	user-select: none;
	position: absolute;
	cursor: pointer;
    padding: 4px 4px;
    width: 20px;
    height: 20px;
	filter: brightness(.6);
}
.expand-btn:hover {
	filter: brightness(1);
}
.expand-btn:before {
	content: '';
	position: absolute;
	top: 5px;
    left: 4px;
    width: 4px;
    height: 4px;
	border: 2px solid var(--text-darker);
	border-bottom: none;
	border-right: none;
}
.expand-btn:after {
	content: '';
	position: absolute;
	bottom: 3px;
	right: 4px;
	width: 9px;
	height: 9px;
	border: 2px solid var(--text-dim);
	border-top: none;
	border-left: none;
}
.modal {
	position: fixed;
	pointer-events: none;
	top: 50%;
	left: 50%;
	border: 2px solid var(--border-dark);
	border-radius: 8px;
	padding: 20px;
	opacity: 0;
	backdrop-filter: blur(6px) brightness(5);
	transform: translate(-50%, -50%) scale(0);
	transition: opacity .24s ease-in-out, background .12s ease-in-out,
		backdrop-filter .12s ease-in-out, transform .12s .06s ease-in-out;
}
.modal.visible {
	pointer-events: initial !important;
	opacity: 1 !important;
	background: rgba(0, 0, 0, .6);
    backdrop-filter: blur(6px) brightness(5);
	transform: translate(-50%, -50%) scale(1);
	transition: opacity .12s cubic-bezier(.2, .4, .3, .2), background .18s ease-in-out,
		backdrop-filter .18s cubic-bezier(.2, 1.4, .6, 2), transform .09s .03s cubic-bezier(.8, .2, .5, 1);
}
input[type="range"] {
	-webkit-appearance: none;
	appearance: none;
	background: transparent;
	cursor: pointer;
	width: 200px;
}
input[type="range"]:focus {
	outline: none;
}
/******** Chrome, Safari, Opera and Edge Chromium styles ********/
input[type="range"]::-webkit-slider-runnable-track {
	background-color: var(--bg-console);
	border-radius: 10px;
	height: 20px;
}
input[type="range"]::-webkit-slider-thumb {
	-webkit-appearance: none;
	appearance: none;
	position: relative;
	top: 50%;
	transform: translateY(-50%);
	background-color: var(--text-dim);
	border-radius: 5px;

	height: 12px;
	width: 9px;
	filter: blur(.4px);
	outline: 3px solid rgba(148, 192, 213, 0.2);
	outline-offset: 2px;
	transition: outline .12s .06s ease-in-out, outline-offset .12s ease-in-out, filter .06s ease-in-out, scale .24s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
input[type="range"]:focus::-webkit-slider-thumb {
	transform: translateY(-50%) scale(1.2);
	outline: 0px solid rgba(255, 255, 255, .0);
	outline-offset: 4px;
	transition: outline .18s .06s ease-in-out, outline-offset .06s ease-in-out, filter .06s ease-in-out, scale .24s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/** === PARTICLE CANVAS === */
#particles-canvas {
	/*background: rgba(0, 199, 0, 0.2);*/
	pointer-events: none;
    z-index: 1;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

/** === CONNECTIONS LIST PANEL === */
#connections-list-wrapper {
	pointer-events: none;
	user-select: none;
	position: absolute;
	flex-direction: column;
	opacity: 0;
    bottom: 2%;
    left: 2%;
	font-size: 12px;
    max-height: 300px;
    background: var(--bg-med);
    border: 2px solid var(--border-dark);
	border-radius: 8px;
	padding: 10px;
	gap: 8px;
	transition: opacity .4s cubic-bezier(0.875, 0.285, 0.52, .75);
}
#connections-list-wrapper.visible {
	pointer-events: initial;
	opacity: 1;
}
#connections-list {
	overflow-y: auto;
	width: 500px;
	max-height: 240px;
	display: flex;
	flex-direction: column;
	gap: 6px;
}
.connections-list-header {
	margin-top: 10px;
}
.connection-item, .connections-list-header {
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: space-between;
	padding: 6px 8px;
	gap: 6px;
}
.connections-list-header {
	pointer-events: none !important;
	color: var(--text-dim) !important;
}
.connection-item {
	background: var(--bg-console);
	border-radius: 6px;
}
.connection-item:hover {
	background: var(--bg-header);
}
.connections-list-header div:not(:first-child), .connection-item div:not(:first-child) {
	text-align: center;
}
.connection-item div:not(:last-child), .connections-list-header div:not(:last-child) {
	border-right: 1px solid var(--border-light);
}
#connections-list .connection-item-view-card {
	font-size: 16px;
}
.connection-item-name {
	width: 25%;
}
.connection-item-id {
	width: 35%;
}
.connection-item-id, .connection-item-action, .connection-item-view-card {
	color: var(--text-dim);
}
.connection-item-status, .connection-item-action {
	width: 15%;
}
.connection-item-view-card {
	width: 10%;
}
.connection-item-action, .connection-item-view-card {
	cursor: pointer;
}
.connection-item-action.accept:hover {
	color: var(--engineer-color);
}
.connection-item-action.remove:hover {
	color: var(--color4);
}
.connection-item-view-card:hover {
	color: var(--color2);
}

/* === DEV INFO PANEL === */
.dev-info {
	pointer-events: none;
	opacity: 0;
	position: absolute;
	top: 3%;
	right: 2%;
	background: var(--bg-header);
	color: var(--text-dim);
	padding: 10px;
	border-radius: 5px;
	font-size: 12px;
}
.UI-wrapper.debug .dev-info { /* show only in debug mode */
	pointer-events: initial;
	animation: fadeIn 1s 1s forwards;
}
.dev-info pre {
	margin: 5px 0 0 0;
}
#modeSwitchBtn {
	position: absolute;
    top: 10px;
    right: 10px;
}

/* === UPGRADE OFFERS === */
.upgrade-offers-wrapper {
	z-index: 1;
	pointer-events: initial;
	opacity: 0;
	user-select: none;
	position: absolute;
	top: 7%;
	right: 50%;
	transform: translateX(50%) scale(0);
	display: flex;
	flex-direction: row;
	gap: 12px;
	filter: blur(8px) grayscale(1);
	transition: opacity .4s ease-in-out,
		filter .3s .3s cubic-bezier(0.875, 0.285, 0.52, .75),
		transform .4s .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.upgrade-offers-wrapper.visible {
	opacity: 1;
	filter: blur(0px) grayscale(0);
	transform: translateX(50%) scale(1);
}
.upgrade-offer {
	cursor: pointer;
	display: flex;
	flex-direction: column;
	align-items: center;
	background: var(--bg-console);
	border: 2px solid var(--border-main);
	border-radius: 8px;
	padding: 10px;
	width: 64px;
	height: 80px;
	gap: 8px;
	transform: scale(1);
	transition: border-color .2s .06s ease-in-out, transform .14s .12s ease-in-out;
}
.upgrade-offer.uncommon {
	box-shadow: 0 0 8px -2px var(--rarity-uncommon);
}
.upgrade-offer.rare {
	box-shadow: 0 0 8px -2px var(--rarity-rare);
}
.upgrade-offer.epic {
	box-shadow: 0 0 8px -2px var(--rarity-epic);
}
.upgrade-offer.legendary {
	box-shadow: 0 0 8px -2px var(--rarity-legendary);
}
.upgrade-offer:hover, .upgrade-offer.selected {
	border-color: var(--color2);
	transition: border-color .2s cubic-bezier(0.175, 0.885, 0.32, .575), transform .16s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	/*transition: border-color .2s cubic-bezier(0.175, 0.885, 0.32, .575), scale .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);*/
	transform: scale(1.05) translateY(2%);
}
.upgrade-offer.selected {
	border-color: var(--text-main);
}
.upgrade-offer.disabled {
	pointer-events: none;
	filter: grayscale(1) brightness(0.6);
}
.upgrade-offer::before {
	content: '';
	position: absolute;
	inset: 0; /* shorthand for top/right/bottom/left: 0 */
	background-size: 38px 38px;
	background-repeat: no-repeat;
	background-position: center;
	pointer-events: none;
	border-radius: 6px;
	filter: invert(1) brightness(.66);
	transition: filter .2s .06s ease-in-out;
}
.upgrade-offer:hover::before, .upgrade-offer.selected::before {
	filter: invert(1) brightness(1);
}
.upgrade-offer.levelUp::after {
    content: '+';
    position: absolute;
    top: 2px;
    right: 6px;
    font-size: 20px;
    font-weight: bold;
    opacity: .8;
}
.upgrade-offer.producer::before {
	background-size: 42px 42px;
	background-image: var(--producer-icon);
}
.upgrade-offer.multiProducer::before {
	background-size: 42px 42px;
	background-image: var(--multi-producer-icon);
}
.upgrade-offer.energyDrop::before {
	background-image: var(--energy-drop-icon);
}
.upgrade-offer.cleaner::before {
	background-image: var(--cleaner-icon);
}
.upgrade-offer.maxEnergy::before {
	background-image: var(--maxEnergy-icon);
}
.upgrade-offer.autoCleaner::before {
	background-image: var(--autoCleaner-icon);
}
.upgrade-offer.buildReactor::before, .upgrade-offer.reactor::before {
	background-image: var(--reactor-icon);
}
.upgrade-offer.buildFabricator::before, .upgrade-offer.fabricator::before {
	background-image: var(--fabricator-icon);
}
.upgrade-offer.buildTradeHub::before, .upgrade-offer.tradeHub::before {
	background-image: var(--trade-hub-icon);
}
.upgrade-offers-wrapper .helper-text {
	pointer-events: none;
	position: absolute;
    width: max-content;
    top: 150%;
    left: 50%;
	width: 260px;
	text-align: center;
	transform: translateX(-50%);
}
.upgrade-offers-wrapper .helper-bar {
	position: absolute;
	bottom: 140%;
	left: 50%;
    height: 12px;
    width: 280px;
    border: solid 4px var(--color2);
    border-top: none;
    transform: translateX(-50%);
}

/* === ENERGY BAR === */
#energy-bar-wrapper {
	z-index: 2;
	cursor: pointer;
	pointer-events: initial;
	opacity: 0;
	user-select: none;
	position: absolute;
	top: 2%;
	left: 50%;
	width: 200px;
	height: 20px;
	transform: translateX(-50%);
}
#energy-bar-wrapper div {
	pointer-events: none;
}
#energy-bar-wrapper .resource-icon, #energy-bar-wrapper .trend-up-icon {
    z-index: 1 !important;
	position: absolute !important;
    width: 20px !important;
    height: 20px !important;
    top: 50% !important;
    left: 12px !important;
    margin: 0 !important;
	background: var(--bg-console) !important;
    transform: translate(-50%, -50%) scale(.66) !important;
}
#energy-bar-wrapper .trend-up-icon {
	display: none;
	left: initial !important;
	right: 12px !important;
	transform: translate(50%, -50%) scale(.66) !important;
}
#energy-bar-wrapper.overload .trend-up-icon {
	display: block;
}
.UI-wrapper.started #energy-bar-wrapper {
	animation: fadeIn .6s 1s forwards cubic-bezier(0.75, -0.5, 0.25, 1.5);
}
.energy-bar {
	overflow: hidden;
	width: 100%;
	height: 100%;
	background: var(--bg-console);
	border: 2px solid var(--border-main);
	border-radius: 10px;
}
.energy-fill {
	pointer-events: none;
	height: 100%;
	width: 0%;
	background: var(--color2);
	transition: width .6s cubic-bezier(0.175, 0.885, 0.32, .975);
}
.energy-text {
	pointer-events: none;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	color: var(--text-main);
	font-size: 12px;
	font-weight: bold;
	-webkit-text-stroke: 2.5px var(--bg-dark);
  	paint-order: stroke fill;
}

/* === RESOURCES BAR === */
.inventories-wrapper {
	position: absolute;
	display: flex;
	gap: 12px;
	top: 3%;
    left: 2%;
}
.resources-bar {
	/*overflow: hidden;*/
	pointer-events: initial;
	opacity: 0;
	user-select: none;
    /*position: absolute;*/
	position: relative;
    display: flex;
	flex-direction: column;
    background: var(--bg-console);
    border: 2px solid var(--border-light);
	border-radius: 8px;
    padding: 10px 8px 12px 8px;
	height: fit-content;
	width: 180px;
	transition: transform .2s cubic-bezier(.3, .5, .1, 1),
		opacity .2s ease-in-out,
		width .2s cubic-bezier(.3, .5, .1, 1);
}
.inventories-wrapper.spectating .resources-bar {
	width: 110px;
}
.resource-bar-title {
	font-size: 14px;
    color: var(--text-darker);
    font-weight: bold;
    margin: -3px 0 10px 4px;
	transform: scaleX(.9);
    transform-origin: left;
	white-space: nowrap;
}
.inventories-wrapper .resource-bar-title .my-inventory {
	position: absolute;
	left: 0;
}
.inventories-wrapper:not(.spectating) .resource-bar-title .me {
	opacity: 0;
}
.inventories-wrapper.spectating .resource-bar-title .my-inventory {
	opacity: 0;
}

.UI-wrapper.started .resources-bar {
	animation: fadeIn 1.2s 1.4s forwards;
}
.resources-bar.spectator {
	opacity: 1;
	width: 110px;
    border-color: transparent;
	transform-origin: right;
    box-shadow: 0 0 2px 0px black, 0 0 1px 1px var(--color2);
}
.inventories-wrapper:not(.spectating) .resources-bar.spectator {
	opacity: 0;
	pointer-events: none;
	/*transform-origin: top left;*/
	transform: scale(0);
}
/*.resources-bar.expanded {

}*/
.resource-tier-wrapper {
	display: flex;
	flex-direction: column;
	height: fit-content;
	width: 100%;
	gap: 8px;
	transition: opacity .2s ease-in-out,
		gap .2s cubic-bezier(0.175, 0.885, 0.32, 1.275),
		padding-bottom .2s cubic-bezier(0.175, 0.885, 0.32, 1.275),
		margin-bottom .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.resource {
	height: 16px;
	font-size: 12px;
	line-height: 0;
	cursor: pointer;
	position: relative;
    display: flex;
    align-items: center;
	justify-content: flex-start;
    gap: 6px;
	min-width: 50px;
	transition: height .2s .2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.resources-bar .resource .tooltip {
	transform: translateX(-40%);
}
.resource-icon, .trend-up-icon {
	width: 16px;
	height: 16px;
	display: inline-block;
}
.trend-up-icon {
	width: 19px;
	height: 19px;
	margin: -1.5px;
	-webkit-mask: var(--trend-icon) center/contain no-repeat;
	mask: var(--trend-icon) center/contain no-repeat;
	background: var(--color2);
}
.resource-icon.energy {
	width: 19px;
	height: 19px;
	margin: -1.5px;
	-webkit-mask: var(--energy-icon) center/contain no-repeat;
	mask: var(--energy-icon) center/contain no-repeat;
	background: var(--energy-color);
}
.resource-icon.chips {
	width: 22px;
	height: 22px;
	margin: -3px;
	-webkit-mask: var(--chip-icon) center/contain no-repeat;
	mask: var(--chip-icon) center/contain no-repeat;
	background: var(--chip-color);
}
.resource-icon.datas {
	-webkit-mask: var(--data-icon) center/contain no-repeat;
	mask: var(--data-icon) center/contain no-repeat;
	background: var(--data-color);
}
.resource-icon.models {
	-webkit-mask: var(--model-icon) center/contain no-repeat;
	mask: var(--model-icon) center/contain no-repeat;
	background: var(--model-color);
}
.resource-icon.engineers {
	width: 18px;
	height: 18px;
	margin: -1px;
	-webkit-mask: var(--engineer-icon) center/contain no-repeat;
	mask: var(--engineer-icon) center/contain no-repeat;
	background: var(--engineer-color);
}
.resource-icon.algorithms {
	width: 18px;
    height: 18px;
	margin: -1px -1px -1px -1px;
	filter: hue-rotate(-15deg);
	-webkit-mask: var(--algorithm-icon) center/contain no-repeat;
	mask: var(--algorithm-icon) center/contain no-repeat;
	background: var(--chip-color);
}
.resource-icon.datasets {
	width: 20px;
	height: 20px;
	margin: -2px;
	filter: hue-rotate(30deg);
	-webkit-mask: var(--dataset-icon) center/contain no-repeat;
	mask: var(--dataset-icon) center/contain no-repeat;
	background: var(--data-color);
}
.resource-icon.prototypes {
	filter: brightness(1.2);
	-webkit-mask: var(--prototype-icon) center/contain no-repeat;
	mask: var(--prototype-icon) center/contain no-repeat;
	background: var(--model-color);
}
.resource-icon.catalyzers {
    width: 19px;
    height: 19px;
    margin: -2px -3px -2px 0px;
	filter: hue-rotate(-58deg) brightness(1.4);
	-webkit-mask: var(--catalyzer-icon) center/contain no-repeat;
	mask: var(--catalyzer-icon) center/contain no-repeat;
	background: var(--engineer-color);
}
.resource-icon.aimodules {
	width: 20px;
	height: 20px;
	margin: -2px;
	filter: hue-rotate(-36deg);
	-webkit-mask: var(--aiModule-icon) center/contain no-repeat;
	mask: var(--aiModule-icon) center/contain no-repeat;
	background: var(--chip-color);
}
.resource-icon.robots {
	filter: hue-rotate(-22deg);
	-webkit-mask: var(--robot-icon) center/contain no-repeat;
	mask: var(--robot-icon) center/contain no-repeat;
	background: var(--data-color);
}
.resource-icon.experts {
	width: 18px;
	height: 18px;
	margin: -1px;
	filter: brightness(1.2);
	-webkit-mask: var(--expert-icon) center/contain no-repeat;
	mask: var(--expert-icon) center/contain no-repeat;
	background: var(--engineer-color);
}
.resource-icon.aicores {
    width: 22px;
    height: 22px;
    margin: -3px;
	filter: hue-rotate(-18deg);
	-webkit-mask: var(--aiCore-icon) center/contain no-repeat;
	mask: var(--aiCore-icon) center/contain no-repeat;
	background: var(--chip-color);
}
.resource-icon.drones {
	filter: hue-rotate(-12deg);
	-webkit-mask: var(--drone-icon) center/contain no-repeat;
	mask: var(--drone-icon) center/contain no-repeat;
	background: var(--data-color);
}
.resource-icon.superconductors {
	width: 20px;
	height: 20px;
	margin: -2px;
	filter: hue-rotate(-70deg);
	-webkit-mask: var(--superconductor-icon) center/contain no-repeat;
	mask: var(--superconductor-icon) center/contain no-repeat;
	background: var(--chip-color);
}
.resource-icon.geniuses {
	width: 20px;
	height: 20px;
	margin: -2px;
	filter: brightness(1.6);
	-webkit-mask: var(--genius-icon) center/contain no-repeat;
	mask: var(--genius-icon) center/contain no-repeat;
	background: var(--engineer-color);
}
.resource-icon.agicells {
	width: 20px;
	height: 20px;
	margin: -2px -4px -2px 0px;
	filter: hue-rotate(138deg) brightness(1.8);
	-webkit-mask: var(--agiCell-icon) center/contain no-repeat;
	mask: var(--agiCell-icon) center/contain no-repeat;
	background: var(--data-color);
}
.resource-value {
    font-weight: bold;
    color: var(--text-dim);
    min-width: 20px;
}
.resource-value-change {
	position: absolute;
	opacity: 1;
	right: 0;
	color: var(--text-darker);
	transform: scaleX(.9);
    transform-origin: right;
	transition: opacity .12s ease-in-out;
}
.resource-value-change.up {
	opacity: .8;
	color: var(--engineer-color);
}
.resource-value-change.down {
	opacity: .8;
	color: var(--color4);
}
.inventories-wrapper.spectating .resource-value-change {
	opacity: 0;
}
.resource:hover .resource-value {
	color: var(--text-main);
}
.resources-bar .expand-btn {
	bottom: 1px;
	right: 2px;
}
.resource-tier-wrapper:nth-child(-n+3) {
	padding-bottom: 2px;
	margin-bottom: 6px;
}
.resource-tier-wrapper:not(:nth-child(-n+3)) {
	pointer-events: none;
	opacity: 0;
	gap: 0px;
	padding-bottom: 0px;
	margin-bottom: 0px;
}
.resources-bar:not(.expanded) .resource-tier-wrapper:not(:nth-child(-n+3)) .resource {
	height: 0px;
}
.resources-bar.expanded .resource-tier-wrapper {
	pointer-events: initial;
	padding-bottom: 12px;
	opacity: 1;
	gap: 8px;
}
.resources-bar.expanded .resource-tier-wrapper:not(:last-child) {
	margin-bottom: 6px;
	border-bottom: 1px solid var(--border-light);
}
.UI-wrapper.started .resources-bar.selection-enabled {
	animation: fadeIn 1.2s 1.4s forwards, pulseResourceBarBorderColor 1s infinite;
}
@keyframes pulseResourceBarBorderColor {
	0% { border-color: var(--border-light); }
	50% { border-color: var(--text-main); }
	100% { border-color: var(--border-light); }
}
.resources-bar.selection-enabled .resource:hover {
	border-radius: 2px;
	box-shadow: 0px 1px 0px 2px var(--text-main);
}
.resources-bar.selection-enabled::before {
/*.resources-bar::before {*/ /* used for fast debug */
	content: '';
	position: absolute;
	width: 64px;
    height: 64px;
	top: calc(100% + 20px);
	left: 50%;
	background: var(--arrow-icon);
    filter: invert(1);
    transform: rotate(180deg) translate(50%);
	animation: up-down-arrow-bounce 1.2s infinite cubic-bezier(0.445, 0.05, 0.55, 0.95);
}
@keyframes up-down-arrow-bounce {
	0%, 100% {
		filter: invert(1) brightness(.7);
		transform: rotate(180deg) translate(50%, 0%); 
	} 60% {
		filter: invert(1) brightness(1);
		transform: rotate(180deg) translate(50%, 10%); 
	}
}

/* === INPUTS === */
.inputs-wrapper {
	opacity: 0;
	pointer-events: initial;
	position: absolute;
	bottom: 2%;
	left: 2%;
}
.UI-wrapper.started .inputs-wrapper {
	animation: fadeIn .6s 2s forwards cubic-bezier(0.75, -0.5, 0.25, 1.5);
}


/* === PLAYER INFO PANEL === */
.player-info {
	pointer-events: initial;
	opacity: 0;
	position: absolute;
	bottom: 2%;
    left: 50%;
    color: var(--text-main);
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    transform: translateX(-50%);
}
.UI-wrapper.started .player-info {
	animation: fadeIn .8s 2.6s forwards;
}
.player-info .tooltip {
	text-align: center;
	font-weight: normal !important;
	transform: translate(-40%, -180%);
}
.player-info .player-name {
	text-align: center;
}
#player-name {
	padding: 0;
}
.player-id {
	color: var(--text-dim);
	margin-top: 2px;
	position: relative;
}
.player-stats-wrapper {
	user-select: none;
	display: flex;
	flex-direction: column;
	gap: 4px;
	margin-top: 6px;
	padding-top: 6px;
	border-top: 1px solid var(--border-light);
	font-weight: bold;
}
.player-stat {
	pointer-events: auto;
	position: relative;
	display: flex;
	align-items: center;
	gap: 6px;
	color: var(--text-dim);
}
#lifetimeCountWrapper {
	color: var(--text-darker);
}
#connectionCountWrapper {
	cursor: pointer;
}
.player-stat div, .player-stat span, .player-stat img {
	pointer-events: none;
}
.player-stat img {
	width: 16px;
	height: 16px;
	vertical-align: middle;
	filter: invert(1);
}
#connection-offer-notification {
	opacity: 0;
	pointer-events: none;
	margin-left: 2px;
	background: var(--color2);
	color: var(--bg-header);
	text-align: center;
	font-weight: bold;
	font-size: 14px;
	border-radius: 50%;
	width: 14px;
	height: 14px;
	animation: blinkBright .8s infinite;
}
#connection-offer-notification.visible {
	opacity: 1;
}

/** === BUILDINGS WRAPPER === */
.buildings-wrapper {
	user-select: none;
	opacity: 1;
	pointer-events: initial;
	position: absolute;
	display: flex;
	flex-direction: column;
	top: 32%;
	right: 2%;
	padding: 4px 8px;
}
.buildings-wrapper .helper-text {
	position: absolute;
	align-items: center;
    height: 110%;
    width: 170px;
	top: -7%;
    right: 110%;
}
.buildings-wrapper .helper-text.visible {
	display: flex;
}
.buildings-wrapper .helper-bar {
	height: 100%;
	width: 12px;
	border: solid 4px var(--color2);
	border-right: none;
}
.buildings-wrapper .building-upgradePoints {
	z-index: 1;
	pointer-events: none;
    position: absolute;
    top: -5px;
    right: -4px;
    width: 20px;
    height: 20px;
    font-size: 14px;
    line-height: 21px;
    text-align: center;
    border-radius: 50%;
	color: var(--text-main);
	background: radial-gradient(var(--data-color) 47%, var(--color2) 80%);
	transform: scale(0);
	transition: transform .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.buildings-wrapper .building-upgradePoints.visible {
	transform: scale(1);
}
/** OLD VERSION : WITH HEIGHT ANIMATION **/
/*.buildings-wrapper .building-icon, .buildings-wrapper .building-icon img {
	pointer-events: none;
	position: relative;
	margin-bottom: 12px;
	height: 0px;
}
.buildings-wrapper .building-icon.visible, .buildings-wrapper .building-icon.visible img {
	pointer-events: initial;
	height: 38px;
	transition: height .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}*/
/** NEW VERSION : WITHOUT HEIGHT ANIMATION, BRIGHTNESS CHANGE ON VISIBLE **/
.buildings-wrapper .building-icon, .buildings-wrapper .building-icon img {
	pointer-events: none;
	position: relative;
	margin-bottom: 12px;
	height: 38px;
}
.buildings-wrapper .building-icon.visible, .buildings-wrapper .building-icon.visible img {
	pointer-events: initial;
	
}

.buildings-wrapper img {
	user-select: none;
	width: 38px;
	cursor: pointer;
	filter: invert(1) brightness(.2);
	transition: filter .06s .06s ease-in-out;
}
.buildings-wrapper .building-icon.visible img {
	filter: invert(1) brightness(.7);
}
.buildings-wrapper .building-icon.visible img:hover {
	filter: invert(1) brightness(1);
	transition: filter .06s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
#reactor-icon img {
	transform: scale(.92) translateY(10%);
}
/*#fabricator-icon img {
	transform: scale(1.1) rotate(180deg) translateY(-16%);
}*/
.buildings-wrapper .tooltip {
	top: 80%;
    right: 80%;
    left: auto;
    transform: translateX(0%);
	font-size: 12px;
}

/** === BUILDING MODALS === */
.building-modal {
	width: 500px;
	height: 400px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
/** === SHARED STYLES FOR BUILDING MODALS === */
/** === MODULES TREE COMPONENT === */
.modules-wrapper {
	position: relative;
	margin-bottom: 12px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--border-light);
}
.modules-wrapper .helper-text {
    z-index: 2;
    position: absolute;
    top: 49%;
    left: 1px;
    height: 50%;
}
.modules-wrapper .helper-text.visible {
	display: block;
}
.modules-wrapper .helper-text span {
	display: block;
    position: absolute;
    width: 260px;
    bottom: 3%;
    left: 120px;
}
.modules-wrapper .helper-bar {
	position: absolute;
    top: -10px;
    left: -16px;
    height: calc(100% + 10px + 10px - 12px);
    width: 110px;
    border: solid 4px var(--color2);
}
.modules-tree-component {
	display: flex;
	flex-direction: row;
	gap: 12px;
	width: fit-content;
}
.tree-step {
	position: relative;
	display: flex;
	align-items: center;
	flex-direction: column;
	justify-content: center;
	gap: 6px;
	border-radius: 4px;
}
.tree-step:not(:last-child) {
	border-right: 2px solid var(--border-dark);
    padding-right: 24px;
}
.tree-step .tier-unlock {
	z-index: 1;
    position: absolute;
	user-select: none;
	display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
	color: var(--text-main);
	background: radial-gradient(var(--bg-med) 100%, var(--border-light) 50%);
	font-size: 22px;
    font-weight: bold;
	opacity: .9;
	transition: opacity .6s cubic-bezier(0.175, 0.885, 0.32, 1.275), background .6s ease-in-out;
}
.tree-step .tier-unlock div {
	filter:	brightness(.5);
}
.tree-step .tier-unlock.unlocked {
	pointer-events: none;
	opacity: 0;
	background: radial-gradient(var(--bg-med) 0%, var(--border-light) 0%);
}
.tree-step .module {
	user-select: none;
	position: relative;
	width: 80px;
    height: 60px;
	padding: 2px;
    border-radius: 2px;
	box-shadow: inset 0 0 0 1px var(--border-dark);
	filter: brightness(.5);
	transition: box-shadow .06s cubic-bezier(0.175, 0.885, 0.32, 1.275),
		filter .12s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.tree-step .module.isClickable {
	cursor: pointer;
	filter: brightness(.9);
}
.tree-step .module.isBought {
	box-shadow: inset 0 0 0 2px var(--data-color);
}
.tree-step .module.isClickable.isBought {
	box-shadow: inset 0 0 0 1px var(--text-darker);
}
.tree-step .module:hover {
	z-index: 2;
}
.tree-step .module.isClickable:hover {
	box-shadow: inset 0 0 0 2px var(--color2);
}
.tree-step .module .module-level {
	pointer-events: none;
	position: absolute;
	top: 2px;
	right: 5px;
	font-size: 12px;
	opacity: .5;
	color: var(--text-dim);
}
.tree-step .module:hover .module-level {
	opacity: .8;
}
.tree-step .module::before {
	content: '';
	position: absolute;
	inset: 0; /* shorthand for top/right/bottom/left: 0 */
	background-size: 32px 32px;
	background-repeat: no-repeat;
	background-position: 30% 60%;
	pointer-events: none;
	filter: invert(1) brightness(.66);
	transition: filter .12s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.tree-step .module:hover::before {
	filter: invert(1) brightness(1);
	transition: filter .2s .06s ease-in-out;
}
.tree-step .module.overload::before {
	background-image: var(--overload-icon);
}
.tree-step .module.efficiency::before {
	background-image: var(--efficiency-icon);
}
.tree-step .module.synergy::before {
	background-image: var(--synergy-icon);
}
.tree-step .module.stability::before {
	background-image: var(--stability-icon);
}
.tree-step .module.catalyst::before {
	background-image: var(--catalyst-icon);
}
.tree-step .module.burst::before {
	background-image: var(--burst-icon);
}
.tree-step .module.quantum::before {
	background-image: var(--quantum-icon);
}
.tree-step .module.connectivity::before {
	background-image: var(--connectivity-icon);
}
.tree-step .module.trader::before {
	background-image: var(--trader-icon);
}
.tree-step .module.thief::before {
	background-image: var(--thief-icon);
}
.tree-step .module.beacon::before {
	background-image: var(--beacon-icon);
}
.tree-step .module.planification::before {
	background-image: var(--planification-icon);
}
.tree-step .module.protection::before {
	background-image: var(--protection-icon);
}
.tree-step .module.hacker::before {
	background-image: var(--hacker-icon);
}
.tree-step .module.optimizer::before {
	background-image: var(--optimizer-icon);
	transform: scale(1.1);
    background-position-x: 36%;
}
.tree-step .module.basicProductionLine::before {
	background-image: var(--basic-production-line-icon);
}
.tree-step .module.advancedProductionLine::before {
	background-image: var(--advanced-production-line-icon);
}
.tree-step .module.compositeProductionLine::before {
	transform: scale(1.2);
	background-image: var(--composite-production-line-icon);
}
.tree-step .module.ultimateProductionLine::before {
	background-image: var(--ultimate-production-line-icon);
}
.tree-step .module .tooltip {
	top: 120%;
    left: 50%;
}
.tree-step:first-child .module .tooltip {
	transform: translateX(-20%);
}
.tree-step:last-child .module .tooltip {
	transform: translateX(-80%);
}

/** === PRODUCTION LINE - (WRAPPER) === */
.production-lines-wrapper {
	overflow-y: auto;
	height: 210px;
	/*box-shadow: inset 0 0px 10px -5px black;*/
    box-shadow: inset 0 0px 20px -10px black;
	padding: 2px 0;
}
.production-line {
	user-select: none;
	display: flex;
	position: relative;
	/*margin-left: 10px;*/
	padding-left: 20px;
	/*height: 40px;*/
	height: 80px;
	color: var(--text-darker);
	font-size: 20px;
	/*border-radius: 8px 8px 16px 16px;*/
	/*border-radius: 8px 16px 32px 16px;*/
	border-radius: 2px 32px 24px 16px;
    width: 90%;
}
.production-line:nth-child(even) {
	background: var(--bg-console);
}

/*.production-line.two {
	height: 80px;
}*/
.production-line.three {
	height: 120px;
}
/** === PRODUCTION LINE - INPUTS & OUTPUTS === */
.resource-inputs, .resource-outputs {
	/*z-index: 1;*/
	display: flex;
	flex-direction: column;
	justify-content: center;
	height: 100%;
	filter: brightness(.8);
}
.resource-inputs:hover, .resource-outputs:hover {
	z-index: 1;
}
.production-line .resource {
	height: 100%;
	/*width: fit-content;*/
	width: 60px;
}
.production-line .resource-icon.outputcoef {
	margin: 0 -1px 0 2px;
	-webkit-mask: var(--outputcoef-icon) center/contain no-repeat;
	mask: var(--outputcoef-icon) center/contain no-repeat;
	background: var(--color1);
}
.production-line .resource .tooltip {
	top: 80%;
}
.production-line:not(:first-child):last-child .resource .tooltip {
	top: -20%;
}
.resource-inputs .resource .tooltip {
	transform: translateX(0%);
}

.production-line.two .resource {
	height: 50%;
}
.production-line.three .resource {
	height: 33.3%;
}
.resource-outputs {
	display: flex;
	flex-direction: column;
	justify-content: center;
	gap: 6px;
	margin-left: 3px;
	height: 100%;
}
.production-line.one .resource-outputs {
	margin-left: 3px;
}
/** === PRODUCTION CYCLE - FITTINGS & CHAINS === */
.production-chain, .production-chain-fitting {
	color: var(--text-darker);
	transition: color .2s cubic-bezier(0.175, 0.885, 0.32, 1.5);
}
.production-chain {
	position: relative;
	display: flex;
	flex-direction: column;
    justify-content: center;
    height: 100%;
	gap: 17px;
	margin-left: 6px;
}
.production-chain-fitting {
	position: relative;
	display: flex;
	flex-direction: column;
	justify-content: center;
	height: 100%;
	margin-left: 3px;
	gap: 4px;
}
.production-chain-fitting.two-inputs.one-output .fitting:nth-child(1),
.production-chain-fitting.one-inputs.two-output .fitting:nth-child(2) {
	transform: rotate(33deg);
}
.production-chain-fitting.two-inputs.one-output .fitting:nth-child(2),
.production-chain-fitting.one-inputs.two-output .fitting:nth-child(1) {
	transform: rotate(-33deg);
}

.production-chain.three .chain:nth-child(1) {
	transform: rotate(6deg);
}
.production-chain.three .chain:nth-child(3) {
	transform: rotate(-6deg);
}
.production-chain-fitting.three-inputs.one-output .fitting:nth-child(1) {
	transform: translate(2px, 2px) rotate(40deg);
}
.production-chain-fitting.one-inputs.one-output .fitting,
.production-chain-fitting.three-inputs.one-output .fitting:nth-child(2) {
	transform: translateX(-3px);
}
.production-chain-fitting.three-inputs.one-output .fitting:nth-child(3) {
	transform: translate(2px, -2px) rotate(-40deg);
}
.chain, .fitting {
	font-weight: bold;
	position: relative;
	filter: brightness(0.5);
}
.chain::after, .fitting::after {
	position: absolute;
	content: '';
	width: 100%;
	height: 100%;
	transform: translateX(-100%) scaleX(0);
    transform-origin: left;
	animation: none;
	backdrop-filter: brightness(1);
}

.production-line.produced .resource-inputs {
	animation: inputsGlow var(--turn-duration) infinite;
}
.production-line:not(.broken).produced .resource-outputs {
	animation: inputsGlow var(--turn-duration) .2s infinite reverse;
}
.production-line.produced .chain::after {
	animation: chainGlowGrow var(--turn-duration) infinite;
}
.production-line.produced .fitting::after {
	animation: fittingGlowGrow var(--turn-duration) infinite;
}
.production-line.broken .resource-inputs {
	animation: inputsGlow var(--turn-duration) forwards;
}
.production-line.broken .chain::after {
	animation: chainGlowGrow var(--turn-duration) .4 forwards;
}
.production-line.broken .fitting::after {
	animation: fittingGlowGrow var(--turn-duration) .4 forwards;
}
.production-line.broken .production-chain, .production-line.broken .production-chain-fitting {
	color: #f45c5c;
	transition: color .4s .1s cubic-bezier(0.175, 0.685, 0.22, 1.5);
}
@keyframes inputsGlow {
	0% { filter: brightness(.8); }
	20% { filter: brightness(1.5); }
	40% { filter: brightness(1); }
	100% { filter: brightness(.8); }
}
@keyframes chainGlowGrow {
	0% { transform: translateX(-100%) scaleX(.125); backdrop-filter: brightness(1); } 
	9.9% { transform: translateX(-100%) scaleX(.125); }
	10% { transform: translateX(-100%) scaleX(.25); }
	19.9% { transform: translateX(-100%) scaleX(.25); }
	20% { transform: translateX(-100%) scaleX(.375); }
	29.9% { transform: translateX(-100%) scaleX(.375); }
	30% { transform: translateX(-100%) scaleX(.5); }
	39.9% { transform: translateX(-100%) scaleX(.5); }
	40% { transform: translateX(-100%) scaleX(.625); }
	49.9% { transform: translateX(-100%) scaleX(.625); }
	50% { transform: translateX(-100%) scaleX(.75); }
	59.9% { transform: translateX(-100%) scaleX(.75); }
	60% { transform: translateX(-100%) scaleX(.875); }
	69.9% { transform: translateX(-100%) scaleX(.875); }
	70% { transform: translateX(-100%) scaleX(1); }
	79.9% { transform: translateX(-100%) scaleX(1); }
	80% { transform: translateX(-100%) scaleX(1); }
	100% { transform: translateX(-100%) scaleX(1); backdrop-filter: brightness(2); }
}
@keyframes fittingGlowGrow {
	0% { transform: translateX(-100%) scaleX(0); backdrop-filter: brightness(1); }
	69.9% { transform: translateX(-100%) scaleX(0); }
	70% { transform: translateX(-100%) scaleX(.5); }
	79.9% { transform: translateX(-100%) scaleX(.5); }
	80% { transform: translateX(-100%) scaleX(1); }
	100% { transform: translateX(-100%) scaleX(1); backdrop-filter: brightness(2); }
}
/** === PRODUCTION CYCLE - ACTIONS === */
.input-vertical-range {
	position: relative;
	display: flex;
	align-items: center;
	height: 100%;
}
.five-steps-range-bars {
    position: absolute;
    right: 11px;
    width: 6px;
    height: 50px;
    background: linear-gradient(0deg, var(--border-main) 0%, var(--border-main) 10%, transparent 10%);
    background-size: 100% 23%;
    background-position-y: 2px;
    transform: scaleY(.9);
}
.input-vertical-range input[type="range"] {
	transform: rotate(-90deg);
	width: 50px;
}
/******** Chrome, Safari, Opera and Edge Chromium styles ********/
.input-vertical-range input[type="range"]::-webkit-slider-runnable-track {
	background-color: var(--bg-console);
	border-radius: 2px;
	height: 10px;
}
.input-vertical-range input[type="range"]::-webkit-slider-thumb {
	-webkit-appearance: none;
	appearance: none;
	position: relative;
	top: 50%;
	transform: translateY(-50%);
	background-color: var(--text-dim);
	background-color: var(--text-darker);
	border-radius: 1px;

	height: 12px;
	width: 9px;
	filter: blur(.4px);
	outline: 3px solid rgba(148, 192, 213, 0.2);
	outline-offset: 2px;
	transition: outline .12s .06s ease-in-out, outline-offset .12s ease-in-out, filter .06s ease-in-out, scale .24s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.input-vertical-range input[type="range"]:focus::-webkit-slider-thumb {
	transform: translateY(-50%) scale(1.2);
	outline: 0px solid rgba(255, 255, 255, .0);
	outline-offset: 4px;
	transition: outline .18s .06s ease-in-out, outline-offset .06s ease-in-out, filter .06s ease-in-out, scale .24s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/** === REACTOR MODAL === */
#reactor-modal {

}
/** === FABRICATOR MODAL === */
#fabricator-modal {

}
/** === TRADE HUB MODAL === */
#trade-hub-modal {
	display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.trade-menu-wrapper {
	overflow-y: hidden;
	position: relative;
	display: flex;
    justify-content: space-between;
	padding-top: 32px;
	height: 100%; /* temporary */
	background: var(--scrollbar-track); /* temporary */
	border-radius: 6px;
}
.trade-menu-header {
	user-select: none;
	position: absolute;
	display: flex;
	justify-content: space-between;
	align-items: center;
	top: 0;
	height: 32px;
	width: 100%;
	padding: 0 12px;
	color: var(--border-light);
    font-weight: bold;
}
.trade-offers-title {
	font-size: 13px;
}
.my-offers-header {
    position: absolute;
	display: flex;
    justify-content: space-between;
    top: 86%;
    left: 12px;
    width: 46%;
    font-size: 10px;
}

.myOfferHeaderIGive, .myOfferHeaderIReceive, .myOfferHeaderMinStock {
	border-right: solid 1px var(--border-dark);
}
.myOfferHeaderIGive {
	width: 32%;
}
.myOfferHeaderIReceive {
	width: 26%;
}
.myOfferHeaderMinStock, .myOfferHeaderState {
	width: 14%;
}
.trade-menu-header .separator {
	position: absolute;
	top: 0;
	left: 50%;
	height: 100%;
	transform: translateX(-50%);
}
.separator {
	width: 2px;
	background: var(--border-dark);
}
.my-trade-offer-lines-wrapper {
	overflow: hidden scroll;
	display: flex;
	flex-direction: column;
	width: 48%;
	margin: 6px 0;
}
/*=== MY TRADE OFFERS === */
.my-trade-offer-lines-wrapper {
	padding-left: 6px;
	direction: rtl;
}
.my-trade-offer-lines-wrapper > * {
	direction: ltr;
}
.my-trade-offer-line {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 6px 0 12px;
	border-bottom: 1px solid var(--border-dark);
}
.my-trade-offer-line .resource {
	gap: 3px;
	cursor: initial;
}
/* ADAPTED FOR OFFERED RESOURCE LOCKED AT: 1 */
.my-trade-offer-line .resource-icon {
	cursor: pointer;
}
.my-trade-offer-line .resource.offered {
	min-width: none;
	margin-right: -20px;
}
.my-trade-offer-line .resource.offered .resource-value {
	margin-left: 4px;
	color: var(--text-dim) !important;
}
/* END OF ADAPTED CODE */
.my-trade-offer-line .resource.offered .tooltip {
	transform: translateX(-20%);
}
.my-trade-offer-line .arrow {
	color: var(--text-dim);
	font-weight: bold;
	font-size: 12px;
}
.my-trade-offer-line .min-stock {
	position: relative;
    display: flex;
    align-items: center;
    justify-content: flex-end;
	height: 16px;
    min-width: 16%;
    font-size: 12px;
	font-weight: bold;
	color: var(--text-dim);
}
.my-trade-offer-line .min-stock [contenteditable="true"] {
	padding: 4px;
}
.my-trade-offer-line .min-stock .tooltip {
	transform: translateX(-80%);
}
.my-trade-offer-line .toggle-btn {
    height: 16px;
    width: 16px;
    cursor: pointer;
    position: relative;
	border: 1px solid var(--border-dark);
}
.my-trade-offer-line .toggle-btn:hover {
	border-color: var(--text-main);
}
.my-trade-offer-line .toggle-btn::before {
	pointer-events: none;
    content: 'âœ“';
    position: absolute;
    inset: 0;
    opacity: 0;
	top: -4px;
    left: 1px;
}
.my-trade-offer-line .toggle-btn.active::before {
	opacity: 1;
}
.my-trade-offer-line .toggle-btn .tooltip {
	left: initial;
    right: 0;
    transform: translateX(-15%);
}
/*.my-trade-offer-line:nth-last-child(-n+2) .tooltip {*/
.my-trade-offer-line:nth-child(n+3):nth-last-child(-n+2) .tooltip {
	top: -150%;
}
.my-trade-offer-line .min-stock .tooltip,
.my-trade-offer-line .toggle-btn .tooltip {
    padding: 3px 6px;
}
/*=== SWAP === */
.swap-wrapper {
	display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-around;
    width: 48%;
    margin-bottom: 12px;
}
.swap-wrapper .resource {
	position: relative;
	justify-content: space-between;
	flex-direction: row-reverse;
	width: 160px;
    height: 50px;
	padding: 0 16px;
    border-radius: 10px;
    border: 1px solid var(--border-dark);
	transform: translateY(-18px);
}
.swap-wrapper .resource:first-child {
	transform: none;
}
.swap-wrapper .resource .resource-value {
	position: relative;
	transform: translateY(4px);
	padding-left: 4px;
	color: var(--text-darker);
}
.swap-wrapper .resource .resource-value.input-filled-by-user {
	color: var(--text-main);
}
.swap-wrapper .resource .resource-value:before {
	position: absolute;
    font-size: 10px;
    top: -10px;
    left: -4px;
    opacity: .6;
    color: var(--text-darker);
}
.swap-wrapper .resource .tooltip {
	top: 80%;
    left: 70%;
}
.swap-wrapper .resource.sold .resource-value:before {
	content: 'Sell';
}
body.fr .swap-wrapper .resource.sold .resource-value:before {
	content: 'Vendre';
}
.swap-wrapper .resource.bought .resource-value:before {
	content: 'Buy';
}
body.fr .swap-wrapper .resource.bought .resource-value:before {
	content: 'Acheter';
}
.swap-wrapper .taxRate {
	pointer-events: none;
    position: absolute;
    font-family: system-ui;
	top: calc(100% + 12px);
    right: 0;
    color: var(--border-main);
	font-size: 11px;
    font-weight: bold;
}
.swap-wrapper .arrow {
	user-select: none;
	cursor: pointer;
    z-index: 1;
    background: var(--scrollbar-track);
    padding: 4px 6px;
    margin: -4px -6px;
    line-height: 16px;
    border: 2px solid var(--border-dark);
    border-radius: 8px;
    color: var(--text-dim);
	transform: translateY(-10px);
}
.swap-wrapper .arrow:hover {
	border-color: var(--text-main);
	color: var(--text-main);
}
.swap-confirm-btn {
	overflow: hidden;
	position: relative;
	width: 120px;
    height: 32px;
	font-weight: bold;
}
.swap-confirm-btn.filling {
	filter: none !important;
	background: var(--bg-console);
}
.swap-confirm-btn.filling span {
	mix-blend-mode: difference;
}
.swap-confirm-btn .loader {
	opacity: 0;
	position: absolute;
    width: 100%;
    height: 100%;
    left: -100%;
    top: 0;
	background: linear-gradient(150deg, var(--data-color) -58%, var(--energy-color) 67%);
	transform: translateX(0%);
	transition: transform 0 .4s cubic-bezier(0, 0.885, 0.32, 1), opacity .4s ease-in-out;
}
.swap-confirm-btn.filling .loader {
	opacity: 1;
	transition: transform .4s cubic-bezier(0, 0.885, 0.32, 1), opacity .2s ease-in-out;
}

/** === DEAD NODES NOTIFICATIONS === */
#dead-nodes-helper {
	width: 230px;
}
#dead-nodes-wrapper {
	opacity: 0;
	position: fixed;
	bottom: 20%;
	right: 2%;
	width: fit-content;
	height: fit-content;
	display: flex;
	align-items: center;
	flex-direction: row-reverse;
}
#dead-nodes-helper {
	position: fixed;
	bottom: 26%;
	right: 3%;
}
.UI-wrapper.started #dead-nodes-wrapper {
	animation: fadeIn .6s .4s forwards cubic-bezier(0.75, -0.5, 0.25, 1.5);
}
.dead-node-notification {
	position: relative;
	pointer-events: auto;
	cursor: pointer;
	width: 32px;
	height: 32px;
	background: var(--bg-console);
	border: 2px solid var(--border-main);
	border-radius: 50%;
}
.dead-node-notification:hover {
	border-color: var(--color4);
}
.dead-node-tooltip-id {
	border-bottom: 1px solid var(--border-light);
	margin-bottom: 3px;
	padding-bottom: 2px;
}
.dead-node-notification .tooltip {
	flex-direction: column;
	gap: 6px;
	top: auto;
	left: auto;
	bottom: 120%;
	right: 0%;
	transform: translateX(0%);
}
.dead-node-notification:hover .tooltip {
	display: flex;
}
.dead-node-notification::before {
	pointer-events: none;
	content: '';
	position: absolute;
	inset: 0; /* shorthand for top/right/bottom/left: 0 */
	background-image: var(--skull-icon);
	background-size: 24px 24px;
	background-repeat: no-repeat;
	background-position: center;
	pointer-events: none;
	border-radius: 6px;
	filter: invert(1) brightness(.66);
	transition: filter .06s ease-in-out;
}
.dead-node-notification:hover::before {
	filter: invert(1) brightness(1);
	transition: filter .06s .06s ease-in-out;
}
.dead-node-notification.selected {
	border-color: var(--color3);
}
.dead-node-notification.selected::before {
	filter: invert(1) brightness(1);
}

/* === CONSOLE === */
.console {
	pointer-events: initial;
	position: absolute;
	opacity: 0;
	bottom: 2%;
	right: 2%;
    width: 30%;
	min-width: 240px;
    max-width: 360px;
    height: 16%;
    background: var(--bg-console);
    border: 2px solid var(--border-main);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
	animation: fadeIn .4s .2s forwards;
}
.console-header {
	display: none;
    /*display: flex;*/
    background: var(--bg-header);
    padding: 12px 20px;
    border-bottom: 1px solid var(--border-main);
    justify-content: space-between;
    align-items: center;
}
.console-title {
    font-size: 14px;
    font-weight: bold;
    color: var(--color1);
    letter-spacing: 1px;
}
.console-body {
    flex: 1;
    padding: 6px 10px;
    overflow-y: auto;
    font-size: 12px;
    line-height: 1.2;
}
.log-line {
    margin-bottom: 2px;
    opacity: 0;
    animation: fadeIn 0.3s forwards;
}
.log-success { color: var(--color1); }
.log-info { color: var(--color2); }
.log-warning { color: var(--color3); }
.log-error { color: var(--color4); }

/* === NODE-TOOLTIP === */
#node-tooltip {
	display: none !important; /** for now => use node-card instead **/
	pointer-events: initial;
	position: fixed;
	background: rgba(0, 0, 0, .9);
	color: white;
	padding: 10px;
	border-radius: 4px;
	pointer-events: none;
	z-index: 1001;
	font-size: 12px;
	display: none;
	max-width: 200px;
}

/* === NODE-CARD === */
#node-card {
	opacity: 0;
	pointer-events: none;
	position: fixed;
	display: flex;
	flex-direction: column;
	gap: 6px;
	background: var(--bg-console);
	border: 2px solid var(--border-main);
	border-radius: 0 8px 8px 8px;
	color: var(--text-main);
	font-size: 12px;
	padding: 8px;
	min-width: 160px;
	transform: translate(2000px, 2000px);
	transition: opacity .2s .06s cubic-bezier(0.175, 0.885, 0.32, 1.275),
				border-radius .24s .06s cubic-bezier(.2, .8, .1, 1);
	border-color: transparent;
    box-shadow: inset 0 0 1px 0px black, inset 0 0 1px 1px var(--color2);
}
#node-card.offer-viewer-display {
	border-radius: 0px 2px 2px 8px;
}
#node-card  .top-left-corner-decoration {
    top: -1px;
    left: -1px;
}
#node-card.visible {
	opacity: 1;
	display: flex;
	pointer-events: auto;
	transition: transform .6s .2s cubic-bezier(.2, .5, .2, 1),
				border-radius .24s .06s cubic-bezier(.2, .8, .1, 1);
}
#node-card.visible.clicked {
	transition: transform .6s cubic-bezier(.2, 1, .2, 1.2);
}
#node-card.noPointerEvents {
	pointer-events: none;
}
#node-card-id {
	color: var(--text-dim);
}
#node-card .node-actions {
	display: flex;
	flex-direction: column;
	gap: 6px;
    margin-top: 8px;
    padding-top: 8px;
	border-top: 1px solid var(--border-light);
}
#node-card button {
	padding: 5px;
}
#node-card-connect-btn {
	min-width: 150px;
	display: flex;
    align-items: center;
    justify-content: space-around;
}
#node-card-connect-btn-cost .resource-icon {
	width: 15px;
	height: 15px;
	margin: 0 -5px -3px 0;
}
#node-card-offer-viewer {
	pointer-events: auto;
    position: absolute;
    display: flex;
	align-items: center;
    flex-direction: column;
    justify-content: space-between;
    top: 0;
    left: 102%;
    width: 100%;
    height: 100%;
    gap: 4px;
    padding: 16px;
    border-radius: 2px 16px 16px 2px;
    border: 2px solid var(--border-light);
    backdrop-filter: blur(4px);
	transform-origin: left;
	transition: transform .2s cubic-bezier(.3, .5, .1, 1);
}
#node-card:not(.offer-viewer-display) #node-card-offer-viewer,
#node-card:not(.visible) #node-card-offer-viewer {
	pointer-events: none;
	transform: scaleX(0);
}
#node-card-offer-viewer .arrow {
	transform: rotate(90deg);
	font-size: 20px;
	color:var(--border-main);
	font-weight: bold;
	margin: -2px 0;
}
#node-card-offer-viewer .btns-wrapper {
	display: flex;
	flex-direction: column;
	padding-top: 10px;
    gap: 6px;
    width: 100%;
}

/* === SUB-NODE-INFO === */
#sub-node-info {
	margin-top: 6px;
	pointer-events: none;
	position: fixed;
	display: none;
	flex-direction: column;
	gap: 4px;
	font-size: 12px;
	opacity: .8;
}
#sub-node-info .player-name {
	font-weight: bold;
}
#sub-node-info .productions-wrapper {
	display: flex;
	justify-content: center;
	gap: 8px;
}
#sub-node-info.visible {
	display: flex;
}